import"./darkmode-DV7bmj87.js";let r=[],l=null;const m=document.getElementById("formularioTrabajos"),y="675b13efad19ca34f8da0da6",i="$2a$10$1tb.LqxA5Bznk0fa5HaBye14/OgHPZzvJjKgjohMVU0Rea1MdJvQq",d=`https://api.jsonbin.io/v3/b/${y}`;fetch(d,{headers:{"X-Master-Key":i}}).then(e=>{if(!e.ok)throw new Error("Error al cargar el archivo JSON");return e.json()}).then(e=>{r=e.record.trabajos,s(r)}).catch(e=>{console.error("Hubo un problema:",e)});function s(e){let o=document.getElementById("plantillaTrabajo"),n=document.querySelector(".trabajo");n.innerHTML="",e.forEach((a,c)=>{let t=o.cloneNode(!0);t.classList.remove("d-none"),t.classList.add("trabajo-card"),n.appendChild(t);let b=t.querySelector("#nombreTrabajo");b.textContent=a.nombre;let u=t.querySelector("#fechaTrabajo");u.classList.add("text-secondary"),u.textContent=`${h(a.fechaInicio)} - ${h(a.fechaFin)}`;let f=t.querySelector("#descripcionTrabajo");f.textContent=a.descripcion,j(),E(c,a)})}function h(e){const o={year:"numeric",month:"long"};return new Date(e).toLocaleDateString("es-ES",o)}m.addEventListener("submit",e=>{e.preventDefault();const o=document.getElementById("nombreTrabajo").value,n=document.getElementById("fechaInicioTrabajo").value,a=document.getElementById("fechaFinTrabajo").value,c=document.getElementById("descripcionTrabajo").value;if(l!==null)r[l]={nombre:o,fechaInicio:n,fechaFin:a,descripcion:c},l=null;else{const t={nombre:o,fechaInicio:n,fechaFin:a,descripcion:c};r.push(t)}fetch(d,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":i},body:JSON.stringify({trabajos:r})}).then(t=>{if(!t.ok)throw new Error("Error al guardar los datos en JSONBin");return t.json()}).then(()=>{m.reset(),s(r)}).catch(t=>console.error("Hubo un problema:",t))});function j(){document.querySelectorAll(".delete-trabajo").forEach((e,o)=>{e.addEventListener("click",()=>{r.splice(o,1),fetch(d,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":i},body:JSON.stringify({trabajos:r})}).then(n=>{if(!n.ok)throw new Error("Error al actualizar los datos en JSONBin");return n.json()}).then(()=>{s(r)}).catch(n=>console.error("Hubo un problema:",n))})})}function E(e,o){document.querySelectorAll(".edit-trabajo").forEach((n,a)=>{a===e&&n.addEventListener("click",()=>{l=e,document.getElementById("nombreTrabajo").value=o.nombre,document.getElementById("descripcionTrabajo").value=o.descripcion,document.getElementById("fechaInicioTrabajo").value=o.fechaInicio,document.getElementById("fechaFinTrabajo").value=o.fechaFin})})}
