import"./darkmode-QjJK9khg.js";const y={CSS:"./assets/css.svg",HTML:"./assets/html.svg",JavaScript:"./assets/js.svg",SASS:"./assets/sass.svg",Vite:"./assets/vite.svg"};let l=[],a=null;const E=document.getElementById("formularioProyectos"),b="675b13fde41b4d34e46452f3",u="$2a$10$1tb.LqxA5Bznk0fa5HaBye14/OgHPZzvJjKgjohMVU0Rea1MdJvQq",m=`https://api.jsonbin.io/v3/b/${b}`;fetch(m,{headers:{"X-Master-Key":u}}).then(e=>{if(!e.ok)throw new Error("Error al cargar el archivo JSON");return e.json()}).then(e=>{l=e.record.proyectos,g(l)}).catch(e=>{console.error("Hubo un problema:",e)});function g(e){let t=document.getElementById("plantillaProyecto"),o=document.querySelector(".projects");o.innerHTML="",e.forEach((n,d)=>{let c=t.cloneNode(!0);c.classList.remove("d-none"),c.classList.add("project-card"),o.appendChild(c);let r=c.querySelector("#nombreProyecto");r.textContent=n.nombre;let p=c.querySelector("#descripcionProyecto");p.textContent=n.descripcion;let h=c.querySelector("#listadoTecnologiasProyecto");h.innerHTML="",n.tecnologias.forEach(s=>{let S=document.createElement("li"),i=document.createElement("img");y[s]?(i.src=y[s],i.alt=s,i.title=s,i.style.width="24px",i.style.height="24px"):i.alt="Icono no disponible",S.appendChild(i),h.appendChild(S)}),c.querySelector("#githubProyecto").setAttribute("href",n.github),c.querySelector("#demoProyecto").setAttribute("href",n.demo),v(),B(d,n)})}function f(){const e=[];return document.getElementById("tecnologiaCSS").checked&&e.push("CSS"),document.getElementById("tecnologiaHTML").checked&&e.push("HTML"),document.getElementById("tecnologiaJS").checked&&e.push("JavaScript"),document.getElementById("tecnologiaSASS").checked&&e.push("SASS"),document.getElementById("tecnologiaVite").checked&&e.push("Vite"),e}E.addEventListener("submit",e=>{e.preventDefault();const t=document.getElementById("nombre").value,o=document.getElementById("descripcion").value,n=f(),d=document.getElementById("repoURL").value,c=document.getElementById("demoURL").value;if(a!==null)l[a]={nombre:t,descripcion:o,tecnologias:n,github:d,demo:c},a=null;else{const r={nombre:t,descripcion:o,tecnologias:n,github:d,demo:c};l.push(r)}fetch(m,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":u},body:JSON.stringify({proyectos:l})}).then(r=>{if(!r.ok)throw new Error("Error al guardar los datos en JSONBin");return r.json()}).then(()=>{E.reset(),g(l)}).catch(r=>console.error("Hubo un problema:",r))});function v(){document.querySelectorAll(".delete-project").forEach((e,t)=>{e.addEventListener("click",()=>{l.splice(t,1),fetch(m,{method:"PUT",headers:{"Content-Type":"application/json","X-Master-Key":u},body:JSON.stringify({proyectos:l})}).then(o=>{if(!o.ok)throw new Error("Error al actualizar los datos en JSONBin");return o.json()}).then(()=>{g(l)}).catch(o=>console.error("Hubo un problema:",o))})})}function B(e,t){document.querySelectorAll(".edit-project").forEach((o,n)=>{n===e&&o.addEventListener("click",()=>{a=e,document.getElementById("nombre").value=t.nombre,document.getElementById("descripcion").value=t.descripcion,document.getElementById("tecnologiaCSS").checked=t.tecnologias.includes("CSS"),document.getElementById("tecnologiaHTML").checked=t.tecnologias.includes("HTML"),document.getElementById("tecnologiaJS").checked=t.tecnologias.includes("JavaScript"),document.getElementById("tecnologiaSASS").checked=t.tecnologias.includes("SASS"),document.getElementById("tecnologiaVite").checked=t.tecnologias.includes("Vite"),document.getElementById("repoURL").value=t.github,document.getElementById("demoURL").value=t.demo})})}
